<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ä¸¤ç§æ–¹æ³•å®ç°æ€§åˆ«é¢„æµ‹</title>
    <url>/gender-predict/</url>
    <content><![CDATA[<p>åˆ†åˆ«ä½¿ç”¨<code>åŸºäºè§„åˆ™çš„æ–¹æ³•</code>å’Œ<code>åŸºäºç»Ÿè®¡çš„æ–¹æ³•</code>å®ç°æ€§åˆ«é¢„æµ‹ï¼Œæ•°æ®é›†åŠä»£ç è§<a href="https://github.com/gaoxingjian/gender-predict">GitHub</a>ï¼Œæœ¬æ–‡ä¸ºã€Šè‡ªç„¶è¯­è¨€ç†è§£ã€‹æœŸæœ«è¯¾ç¨‹è®¾è®¡æŠ¥å‘Šã€‚</p>
<a id="more"></a>
<h2 id="ä¸€å®éªŒç›®çš„å†…å®¹åŠåˆ†å·¥">ä¸€ã€å®éªŒç›®çš„ã€å†…å®¹åŠåˆ†å·¥</h2>
<h3 id="å®éªŒç›®çš„">1. å®éªŒç›®çš„</h3>
<p>å½“æˆ‘ä»¬å¬åˆ°ä¸€ä¸ªåå­—ï¼Œèƒ½å¤Ÿæ ¹æ®ç»éªŒå’Œå¯¹æ–‡å­—çš„ç†è§£èƒ½å¤Ÿåˆ¤åˆ«å‡ºè¿™ä¸ªåå­—å±äºç”·æ€§è¿˜æ˜¯å¥³æ€§ã€‚å¯æ˜¯ï¼Œå¯¹äºä¸€ä¸ªå†°å†·çš„æœºå™¨ï¼Œå®ƒèƒ½å¤Ÿæ ¹æ®åå­—åˆ¤æ–­æ€§åˆ«å—ï¼Ÿæœ¬å®éªŒåˆ†åˆ«ä»åŸºäºè§„åˆ™çš„æ–¹æ³•å’ŒåŸºäºç»Ÿè®¡çš„æ–¹æ³•è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œç»™å®šä¸€ä¸ªäººåï¼Œåˆ¤æ–­æ€§åˆ«ã€‚</p>
<h3 id="å®éªŒå†…å®¹">2. å®éªŒå†…å®¹</h3>
<p>æœ¬å®éªŒåˆ†åˆ«ä½¿ç”¨ä¸¤ç§æ–¹æ³•å®ç°æ€§åˆ«é¢„æµ‹ï¼Œä¸‹é¢å…·ä½“è¯´æ˜å®éªŒå†…å®¹ï¼š</p>
<ul>
<li>æ–¹æ³•ä¸€ï¼šåŸºäºè§„åˆ™çš„æ–¹æ³•ã€‚äººåçš„æ„æˆå…·æœ‰ä¸€å®šçš„è§„å¾‹ï¼ŒåŸºäºè§„åˆ™çš„æ–¹æ³•æ­£æ˜¯åœ¨å¯¹è¿™äº›è§„å¾‹çš„ç ”ç©¶çš„åŸºç¡€ä¸Šå‘å±•èµ·æ¥çš„ï¼Œå…¶ä¸»è¦æ€æƒ³å°±æ˜¯å¯¹äººåçš„æ„æˆå’Œä¸Šä¸‹æ–‡çš„ä¿¡æ¯è¿›è¡Œæ€»ç»“å½’çº³ï¼Œæ‰¾å‡ºå…¶è§„å¾‹ï¼Œå°†è¿™äº›è§„å¾‹åŠ ä»¥æ€»ç»“æå–ï¼Œä»è€Œå»ºç«‹è§„åˆ™é›†ã€‚ç„¶åæ ¹æ®è§„åˆ™ï¼Œå¯¹æå–å‡ºçš„äººåè¿›è¡Œæ€§åˆ«é¢„æµ‹ã€‚</li>
<li>æ–¹æ³•äºŒï¼šåŸºäºç»Ÿè®¡çš„æ–¹æ³•ã€‚åˆ©ç”¨æœ´ç´ è´å¶æ–¯åˆ†ç±»ï¼Œä»äººåæ ·æœ¬åº“ä¸­å¯¹äººåçš„å„éƒ¨åˆ†ç”¨å­—åŠ ä»¥ç»Ÿè®¡ï¼Œåˆ†åˆ«å¾—åˆ°è¿™äº›ç”¨å­—ä½œäººåå¯¹åº”æ€§åˆ«å‡ºç°çš„æ¦‚ç‡ï¼Œåœ¨çœŸå®æ–‡æœ¬ä¸­é€šè¿‡å¯¹äººåç”¨å­—ä¸²è®¡ç®—å…¶æ¦‚ç‡ä¼°å€¼è¿›è¡Œæ€§åˆ«é¢„æµ‹ã€‚</li>
</ul>
<h2 id="äºŒå®éªŒç¯å¢ƒå’Œç¼–ç¨‹è¯­è¨€">äºŒã€å®éªŒç¯å¢ƒå’Œç¼–ç¨‹è¯­è¨€</h2>
<h3 id="å®éªŒç¯å¢ƒ">1. å®éªŒç¯å¢ƒ</h3>
<ul>
<li>Windows 10 1903</li>
<li>Visual Studio Code</li>
</ul>
<h3 id="ç¼–ç¨‹è¯­è¨€">2. ç¼–ç¨‹è¯­è¨€</h3>
<ul>
<li>Python 3.7.4</li>
</ul>
<h2 id="ä¸‰å®éªŒè¿‡ç¨‹">ä¸‰ã€å®éªŒè¿‡ç¨‹</h2>
<h3 id="é—®é¢˜åˆ†æ">1. é—®é¢˜åˆ†æ</h3>
<ul>
<li>æ–¹æ³•ä¸€ï¼š åŸºäºè§„åˆ™çš„æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¸»è¦æ˜¯ä»ä¸€ç¯‡æ–‡ç« ä¸­åˆ¤æ–­å‡ºäººåçš„æ€§åˆ«ï¼Œæ ¹æ®äººåä¸Šä¸‹æ–‡â€œä»–â€ã€â€œå¥¹â€ã€â€œå®ƒâ€å‡ºç°æ¬¡æ•°åŠäººååœ¨æ–‡ç« ä¸­å‡ºç°çš„æ¬¡æ•°è®¡ç®—æ¦‚ç‡ã€‚æ¦‚ç‡æœ€å¤§çš„ï¼Œå°±æ˜¯å¯¹åº”çš„æ€§åˆ«ã€‚</li>
<li>æ–¹æ³•äºŒï¼šåŸºäºç»Ÿè®¡çš„æ–¹æ³•ã€‚å°†é—®é¢˜çœ‹æˆäºŒåˆ†ç±»é—®é¢˜ï¼Œä¸€ç±»æ˜¯ç”·æ€§ï¼Œä¸€ç±»æ˜¯å¥³æ€§ã€‚ä½¿ç”¨æœ´ç´ è´å¶æ–¯åˆ†ç±»ï¼Œè®¾ç½®ä¸€ä¸ªè®­ç»ƒé›†ï¼Œå…¶ä¸­æœ‰ç”·æ€§åå­—å’Œå¥³æ€§åå­—ï¼Œåˆ†åˆ«è®¡ç®—å‡ºæ‰€æœ‰å¥³ç”Ÿï¼ˆç”·ç”Ÿï¼‰çš„åå­—ä¸­ï¼ŒæŸå­—å‡ºç°çš„é¢‘ç‡ï¼Œè‹¥é¢„æµ‹é›†ä¸­å‡ºç°è®­ç»ƒé›†ä¸­æœªå‡ºç°çš„æ±‰å­—ï¼Œåˆ™éœ€è¦å¯¹é¢‘ç‡è¿›è¡ŒLaplaceå¹³æ»‘ã€‚æœ€åå¯¹é¢„æµ‹é›†ä¸­çš„å§“åè¿›è¡Œé¢„æµ‹ï¼Œå¯¹æ¯”å®é™…æ•°æ®ï¼Œå¾—å‡ºå‡†ç¡®ç‡ã€‚</li>
</ul>
<h3 id="ç®—æ³•è®¾è®¡">2. ç®—æ³•è®¾è®¡</h3>
<ul>
<li><p>æ–¹æ³•ä¸€ï¼šåŸºäºè§„åˆ™çš„æ–¹æ³•ã€‚<span class="math inline">\(X_i\)</span>ä¸ºäººç§°ä»£è¯ï¼šä»–ã€å¥¹ã€å®ƒã€‚ <span class="math display">\[
P(X_i)=\frac{åŒ…å«nameçš„æ®µè½ä¸­X_içš„ä¸ªæ•°/åŒ…å«nameçš„æ®µè½çš„ä¸ªæ•°}{åŒ…å«X_içš„æ®µè½çš„ä¸ªæ•°/æ®µè½æ€»æ•°}
\]</span> <span class="math inline">\(P(X_i)\)</span>æœ€å¤§çš„ï¼Œå°±æ˜¯å¯¹åº”çš„æ€§åˆ«ã€‚</p></li>
<li><p>æ–¹æ³•äºŒï¼šåŸºäºç»Ÿè®¡çš„æ–¹æ³•ã€‚æœ´ç´ è´å¶æ–¯ç®—æ³•æ˜¯ä¸€ç§å…·æœ‰ä¸€å®šçš„å‘ç°è§„å¾‹èƒ½åŠ›çš„æ•°æ®æŒ–æ˜ç®—æ³•ï¼Œå¹¶ä¸”å…·æœ‰åˆ†ç±»èƒ½åŠ›ï¼Œå…¶åŸºæœ¬å‡è®¾æ˜¯æ‰€æœ‰ç‰¹å¾æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå°†è¿™ç§ç‰¹ç‚¹åº”ç”¨åˆ°æ€§åˆ«é¢„æµ‹ä¸­å¯ä»¥å–å¾—è‰¯å¥½çš„æ•ˆæœã€‚å…·ä½“çš„ï¼Œä»äººåè¯†åˆ«çš„è§’åº¦æ¥è¯´ï¼Œä¸€ä¸ªäººååªå­˜åœ¨ä¸¤ç§å¯èƒ½:â€œç”·â€å’Œâ€œå¥³â€ï¼Œè¿™æ ·è´å¶æ–¯ç®—æ³•å°±ä»æ¦‚ç‡çš„è§’åº¦å¯¹ä¸€ä¸ªäººåæ˜¯ç”·æ˜¯å¥³è¿›è¡Œäº†é˜æ˜ã€‚å¯¹äºä¸€ä¸ªåˆ†ç±»é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬åªéœ€è¦å¾—åˆ°å…¶æ ‡ç­¾ï¼Œæˆ‘ä»¬åªéœ€è¦æ±‚è§£ï¼š <span class="math display">\[
y_{pred}=\arg \max_{y}P(Y=y)\prod_{i=1}^{n}{P(X_i|Y=y)}
\]</span></p>
<ol type="1">
<li><p>è®¡ç®—æ¯ä¸ªæ±‰å­—çš„ç”·å¥³é¢‘ç‡ã€‚</p></li>
<li><p>è€ƒè™‘åˆ°é¢„æµ‹é›†ä¸­å¯èƒ½ä¼šæœ‰æ±‰å­—å¹¶æ²¡æœ‰å‡ºç°åœ¨è®­ç»ƒé›†ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹é¢‘ç‡è¿›è¡ŒLaplaceå¹³æ»‘ã€‚</p></li>
<li><p>åœ¨æ€§åˆ«é¢„æµ‹ä¸­ï¼Œæ¯ä¸ªæ ·æœ¬ä¸­å¤§é‡çš„ç‰¹å¾éƒ½æ˜¯<span class="math inline">\(0\)</span>ã€‚æ¯”å¦‚è¯´åªæœ‰<span class="math inline">\(X_2=1\)</span>ï¼Œå…¶ä»–éƒ½ä¸º<span class="math inline">\(0\)</span>ï¼Œé‚£ä¹ˆ <span class="math display">\[
y_{pred}=\arg\max_yP(Y=y)P(X_2=1|Y=y)\frac{\prod_{i=1}^nP(X_i=0|Y=y)}{P(X_2=0|Y=y)}
\]</span></p></li>
</ol></li>
</ul>
<p>ç”±äº<span class="math inline">\(P(X_i)\)</span>çš„æ•°å€¼é€šå¸¸è¾ƒå°ï¼Œæˆ‘ä»¬å¯¹æ•´ä½“å–å¯¹æ•°ï¼ˆé˜²æ­¢æµ®ç‚¹è¯¯å·®ï¼‰ï¼Œå¯å¾— <span class="math display">\[
\log P(Y=y)+\sum_{i=1}^n\log P(X_i=0|Y=y)+\log P(X_2=1|Y=y)-\log P(X_2=0|Y=y)
\]</span> å¯¹äºä¸€ç§æ€§åˆ«ï¼Œ<span class="math inline">\(\log P(Y=y)+\sum_{i=1}^n\log P(X_i=0|Y=y)\)</span>åªéœ€è¦è®¡ç®—ä¸€æ¬¡ã€‚ä¸ºäº†æ–¹é¢ï¼Œæˆ‘ä»¬å°†å…¶æ•°å€¼å­˜æ”¾åœ¨baseså½“ä¸­ã€‚</p>
<h3 id="ç¼–ç ">3. ç¼–ç </h3>
<ul>
<li><p>æ–¹æ³•ä¸€ï¼š åŸºäºè§„åˆ™çš„æ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gender_detect</span>(<span class="params">term, content_lines</span>):</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    brief: åŸºäºæ¦‚ç‡çš„æ€§åˆ«æ£€æµ‹ç®—æ³•ï¼Œ</span></span><br><span class="line"><span class="string">    params: term å°è¯´æœ¯è¯­ï¼Œä¿è¯æ˜¯ä¸€ä¸ªäººå</span></span><br><span class="line"><span class="string">    params: content_lines æŒ‰è¡Œåˆ†å‰²å¥½çš„å°è¯´æ–‡æœ¬</span></span><br><span class="line"><span class="string">    retrun: genre (male, famale, neutral)</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    lines = content_lines</span><br><span class="line">    sls = []</span><br><span class="line">    keyword = term</span><br><span class="line">    hecount = <span class="number">0</span></span><br><span class="line">    shecount = <span class="number">0</span></span><br><span class="line">    itcount = <span class="number">0</span></span><br><span class="line">    sums = <span class="number">0</span></span><br><span class="line">    sumcount = <span class="number">0</span></span><br><span class="line">    andhecount = <span class="number">0</span></span><br><span class="line">    andshecount = <span class="number">0</span></span><br><span class="line">    anditcount = <span class="number">0</span></span><br><span class="line">    sums = <span class="built_in">len</span>(lines)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">        <span class="keyword">if</span> line.find(<span class="string">&quot;ä»–&quot;</span>) != -<span class="number">1</span>:</span><br><span class="line">            hecount = hecount + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> line.find(<span class="string">&quot;å¥¹&quot;</span>) != -<span class="number">1</span>:</span><br><span class="line">            shecount = shecount + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> line.find(<span class="string">&quot;å®ƒ&quot;</span>) != -<span class="number">1</span>:</span><br><span class="line">            itcount = itcount + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> line.find(keyword) != -<span class="number">1</span>:</span><br><span class="line">            sls.append(line)</span><br><span class="line">            sumcount = sumcount + <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> line.find(<span class="string">&quot;ä»–&quot;</span>) != -<span class="number">1</span>:</span><br><span class="line">                andhecount = andhecount + <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> line.find(<span class="string">&quot;å¥¹&quot;</span>) != -<span class="number">1</span>:</span><br><span class="line">                andshecount = andshecount + <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> line.find(<span class="string">&quot;å®ƒ&quot;</span>) != -<span class="number">1</span>:</span><br><span class="line">                anditcount = anditcount + <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> sumcount == <span class="number">0</span> <span class="keyword">or</span> sums == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;neutral&#x27;</span></span><br><span class="line">    heandr = (andhecount/sumcount)/(hecount/sums)</span><br><span class="line">    sheandr = (andshecount/sumcount)/(shecount/sums)</span><br><span class="line">    itandr = (anditcount/sumcount)/(itcount/sums)</span><br><span class="line">    <span class="comment"># print(&quot;ä»–\tå¥¹\tå®ƒ\n&quot;)</span></span><br><span class="line">    candis = [<span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;female&#x27;</span>, <span class="string">&#x27;neutral&#x27;</span>]</span><br><span class="line">    arr = [heandr, sheandr, itandr]</span><br><span class="line">    <span class="comment"># print(arr)</span></span><br><span class="line">    <span class="keyword">return</span> candis[arr.index(<span class="built_in">max</span>(arr))]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_novel_lines</span>(<span class="params">filename</span>):</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        lines = f.readlines()</span><br><span class="line">        <span class="keyword">return</span> lines</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    novel_path = <span class="string">&#x27;data/qing_yu_nian.txt&#x27;</span></span><br><span class="line">    names = [</span><br><span class="line">        <span class="string">&#x27;äº”ç«¹&#x27;</span>, <span class="string">&#x27;ææ²»&#x27;</span>, <span class="string">&#x27;æäº‘ç¿&#x27;</span>, <span class="string">&#x27;æ—è‹¥ç”«&#x27;</span>, <span class="string">&#x27;èŒƒè‹¥è‹¥&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;èŒƒæ€è¾™&#x27;</span>, <span class="string">&#x27;è´¹ä»‹&#x27;</span>, <span class="string">&#x27;æ—å©‰å„¿&#x27;</span>, <span class="string">&#x27;æŸ³æ€æ€&#x27;</span>, <span class="string">&#x27;æµ·æ£ æœµæœµ&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;å¸ç†ç†&#x27;</span>, <span class="string">&#x27;æˆ˜è±†è±†&#x27;</span>, <span class="string">&#x27;èŒƒæ·‘å®&#x27;</span>, <span class="string">&#x27;çº¢è±†é¥­&#x27;</span>, <span class="string">&#x27;ç‹å¯å¹´&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;å››é¡¾å‰‘&#x27;</span>, <span class="string">&#x27;è‹¦è·&#x27;</span>, <span class="string">&#x27;å¶æµäº‘&#x27;</span>, <span class="string">&#x27;æ´ªå››åº &#x27;</span>, <span class="string">&#x27;å½±å­&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;äº‘ä¹‹æ¾œ&#x27;</span>, <span class="string">&#x27;å¶é‡&#x27;</span>, <span class="string">&#x27;å¶å®Œ&#x27;</span>, <span class="string">&#x27;ç‡•å°ä¹™&#x27;</span>, <span class="string">&#x27;å¤ªå&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;å®æ‰äºº&#x27;</span>, <span class="string">&#x27;ææ‰¿ä¹¾&#x27;</span>, <span class="string">&#x27;å¤ªå­&#x27;</span>, <span class="string">&#x27;å¤§çš‡å­&#x27;</span>, <span class="string">&#x27;åŒ—é½å¤§å…¬ä¸»&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;å’Œäº²ç‹&#x27;</span>, <span class="string">&#x27;å’Œäº²ç‹å¦ƒ&#x27;</span>, <span class="string">&#x27;ç‹ç³å„¿&#x27;</span>, <span class="string">&#x27;ç›ç´¢ç´¢&#x27;</span>, <span class="string">&#x27;æ·‘è´µå¦ƒ&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;ææ‰¿æ³½&#x27;</span>, <span class="string">&#x27;å¶çµå„¿&#x27;</span>, <span class="string">&#x27;çš‡å&#x27;</span>, <span class="string">&#x27;æå¼˜æˆ&#x27;</span>, <span class="string">&#x27;éƒ­æ”¸ä¹‹&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;éƒ­ä¿å¤&#x27;</span>, <span class="string">&#x27;éƒ­é“®&#x27;</span>, <span class="string">&#x27;è´ºå®—çº¬&#x27;</span>, <span class="string">&#x27;æœ±æ ¼&#x27;</span>, <span class="string">&#x27;è¨€å†°äº‘&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">    novel_lines = read_novel_lines(novel_path)</span><br><span class="line">    gender_list = [gender_detect(name.strip(), novel_lines) <span class="keyword">for</span> name <span class="keyword">in</span> names]</span><br><span class="line">    print(<span class="built_in">dict</span>(<span class="built_in">zip</span>(names, gender_list)))</span><br></pre></td></tr></table></figure></li>
<li><p>æ–¹æ³•äºŒï¼šåŸºäºç»Ÿè®¡çš„æ–¹æ³•ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> accuracy_score</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_data</span>():</span></span><br><span class="line">    data = pd.read_csv(<span class="string">&#x27;data/data_set.txt&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">    data = data.dropna()</span><br><span class="line"></span><br><span class="line">    data.loc[data[<span class="string">&#x27;gender&#x27;</span>] == <span class="number">2</span>, <span class="string">&#x27;gender&#x27;</span>] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span></span><br><span class="line">    train = data.sample(frac=<span class="number">0.95</span>, random_state=<span class="literal">None</span>, axis=<span class="number">0</span>)</span><br><span class="line">    test = data[~data.index.isin(train.index)]</span><br><span class="line"></span><br><span class="line">    names_female = train[train[<span class="string">&#x27;gender&#x27;</span>] == <span class="number">0</span>]</span><br><span class="line">    names_male = train[train[<span class="string">&#x27;gender&#x27;</span>] == <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    totals = &#123;</span><br><span class="line">        <span class="string">&#x27;f&#x27;</span>: <span class="built_in">len</span>(names_female),</span><br><span class="line">        <span class="string">&#x27;m&#x27;</span>: <span class="built_in">len</span>(names_male)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> names_female, names_male, totals,train,test</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—é¢‘ç‡</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cal_frequency</span>(<span class="params">names_female, names_male, totals</span>):</span></span><br><span class="line">    <span class="comment"># è®¡ç®—åœ¨æ‰€æœ‰å¥³ç”Ÿçš„åå­—å½“ä¸­ï¼ŒæŸä¸ªå­—å‡ºç°çš„é¢‘ç‡ï¼Œç›¸å½“äºæ˜¯è®¡ç®— P(Xi|å¥³ç”Ÿ)</span></span><br><span class="line">    frequency_list_f = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> names_female[<span class="string">&#x27;name&#x27;</span>]:</span><br><span class="line">        <span class="keyword">for</span> char <span class="keyword">in</span> name:</span><br><span class="line">            frequency_list_f[char] += <span class="number">1.</span> / totals[<span class="string">&#x27;f&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—åœ¨æ‰€æœ‰ç”·ç”Ÿçš„åå­—å½“ä¸­ï¼ŒæŸä¸ªå­—å‡ºç°çš„é¢‘ç‡ï¼Œç›¸å½“äºæ˜¯è®¡ç®—P(Xi|ç”·ç”Ÿ)</span></span><br><span class="line">    frequency_list_m = defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> names_male[<span class="string">&#x27;name&#x27;</span>]:</span><br><span class="line">        <span class="keyword">for</span> char <span class="keyword">in</span> name:</span><br><span class="line">            frequency_list_m[char] += <span class="number">1.</span> / totals[<span class="string">&#x27;m&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> frequency_list_f, frequency_list_m</span><br><span class="line"></span><br><span class="line"><span class="comment"># Laplaceå¹³æ»‘</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">laplace_smooth</span>(<span class="params">char, frequency_list, total, alpha=<span class="number">1.0</span></span>):</span></span><br><span class="line">    count = frequency_list[char] * total</span><br><span class="line">    distinct_chars = <span class="built_in">len</span>(frequency_list)</span><br><span class="line">    freq_smooth = (count + alpha) / (total + distinct_chars * alpha)</span><br><span class="line">    <span class="keyword">return</span> freq_smooth</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_base</span>(<span class="params">frequency_list_f,frequency_list_m,train</span>):</span></span><br><span class="line">    base_f = math.log(<span class="number">1</span> - train[<span class="string">&#x27;gender&#x27;</span>].mean())</span><br><span class="line">    base_f += <span class="built_in">sum</span>([math.log(<span class="number">1</span> - frequency_list_f[char]) <span class="keyword">for</span> char <span class="keyword">in</span> frequency_list_f])</span><br><span class="line"></span><br><span class="line">    base_m = math.log(train[<span class="string">&#x27;gender&#x27;</span>].mean())</span><br><span class="line">    base_m += <span class="built_in">sum</span>([math.log(<span class="number">1</span> - frequency_list_m[char]) <span class="keyword">for</span> char <span class="keyword">in</span> frequency_list_m])</span><br><span class="line"></span><br><span class="line">    bases = &#123;<span class="string">&#x27;f&#x27;</span>: base_f, <span class="string">&#x27;m&#x27;</span>: base_m&#125;</span><br><span class="line">    <span class="keyword">return</span> bases</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_log_prob</span>(<span class="params">char, frequency_list, total</span>):</span></span><br><span class="line">    freq_smooth = laplace_smooth(char, frequency_list, total)</span><br><span class="line">    <span class="keyword">return</span> math.log(freq_smooth) - math.log(<span class="number">1</span> - freq_smooth)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compute_log_prob</span>(<span class="params">name, bases, totals, frequency_list_m, frequency_list_f</span>):</span></span><br><span class="line">    logprob_m = bases[<span class="string">&#x27;m&#x27;</span>]</span><br><span class="line">    logprob_f = bases[<span class="string">&#x27;f&#x27;</span>]</span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> name:</span><br><span class="line">        logprob_m += get_log_prob(char, frequency_list_m, totals[<span class="string">&#x27;m&#x27;</span>])</span><br><span class="line">        logprob_f += get_log_prob(char, frequency_list_f, totals[<span class="string">&#x27;f&#x27;</span>])</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&#x27;male&#x27;</span>: logprob_m, <span class="string">&#x27;female&#x27;</span>: logprob_f&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_gender</span>(<span class="params">log_probs</span>):</span></span><br><span class="line">    <span class="keyword">return</span> log_probs[<span class="string">&#x27;male&#x27;</span>] &gt; log_probs[<span class="string">&#x27;female&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_result</span>(<span class="params">bases, totals, frequency_list_m, frequency_list_f,test</span>):</span></span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> test[<span class="string">&#x27;name&#x27;</span>]:</span><br><span class="line">        log_probs = compute_log_prob(name, bases, totals, frequency_list_m, frequency_list_f)</span><br><span class="line">        gender = get_gender(log_probs)</span><br><span class="line">        result.append(<span class="built_in">int</span>(gender))</span><br><span class="line">    test[<span class="string">&#x27;predict&#x27;</span>] = result</span><br><span class="line">    print(test.tail(<span class="number">20</span>))</span><br><span class="line">    print(<span class="string">f&quot;Accuracy: <span class="subst">&#123;accuracy_score(test[<span class="string">&#x27;gender&#x27;</span>],test[<span class="string">&#x27;predict&#x27;</span>])*<span class="number">1.</span>&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> test</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    names_female,names_male,totals,train,test = load_data()</span><br><span class="line">    frequency_list_f, frequency_list_m = cal_frequency(names_female,names_male,totals)</span><br><span class="line">    bases = get_base(frequency_list_f,frequency_list_m,train)</span><br><span class="line">    result = get_result(bases, totals, frequency_list_m, frequency_list_f,test)</span><br><span class="line">    result.to_csv(<span class="string">&#x27;data/result.csv&#x27;</span>,index=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="æµ‹è¯•">4. æµ‹è¯•</h3>
<ul>
<li><p>æ–¹æ³•ä¸€ï¼š åŸºäºè§„åˆ™çš„æ–¹æ³•ã€‚é€‰ç”¨äº†ã€Šåº†ä½™å¹´ã€‹å°è¯´ä¸­<span class="math inline">\(45\)</span>ä¸ªäººç‰©å§“åï¼Œæ ¹æ®æ•´ç¯‡å°è¯´çš„å†…å®¹å¯¹è¿™<span class="math inline">\(45\)</span>ä¸ªäººç‰©æ€§åˆ«è¿›è¡Œäº†é¢„æµ‹ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<ul>
<li><p>ç»“æœè¯´æ˜</p>
<table>
<thead>
<tr class="header">
<th>å˜é‡</th>
<th>è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>male</td>
<td>ç”·æ€§</td>
</tr>
<tr class="even">
<td>female</td>
<td>å¥³æ€§</td>
</tr>
<tr class="odd">
<td>neutral</td>
<td>ä¸­æ€§æˆ–æ— æ³•åˆ¤åˆ«</td>
</tr>
</tbody>
</table></li>
<li><p>æµ‹è¯•ç»“æœ</p></li>
</ul></li>
</ul>
<figure>
<img data-src="/gender-predict/rule_result.png" alt="æ–¹æ³•ä¸€æµ‹è¯•ç»“æœ" /><figcaption aria-hidden="true">æ–¹æ³•ä¸€æµ‹è¯•ç»“æœ</figcaption>
</figure>
<ul>
<li><p>æ–¹æ³•äºŒï¼šåŸºäºç»Ÿè®¡çš„æ–¹æ³•ã€‚æ•°æ®é›†æ¥è‡ªç½‘ç»œçˆ¬è™«ï¼Œå…±æœ‰<span class="math inline">\(120000\)</span>æ¡æ ·æœ¬ï¼Œå°†æ•°æ®é›†è¿›è¡Œåˆ’åˆ†ï¼Œ<span class="math inline">\(95\%\)</span>ä¸ºè®­ç»ƒé›†ï¼Œå‰©ä¸‹<span class="math inline">\(5\%\)</span>ä¸ºæµ‹è¯•é›†ã€‚</p>
<ul>
<li><p>æ ·æœ¬è¯´æ˜</p>
<table>
<thead>
<tr class="header">
<th>å˜é‡</th>
<th style="text-align: left;">è§£é‡Š</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>id</td>
<td style="text-align: left;">ç¼–å·</td>
</tr>
<tr class="even">
<td>name</td>
<td style="text-align: left;">åå­—</td>
</tr>
<tr class="odd">
<td>gender</td>
<td style="text-align: left;">æ€§åˆ«ã€‚0è¡¨ç¤ºå¥³ç”Ÿï¼Œ1è¡¨ç¤ºç”·ç”Ÿã€‚</td>
</tr>
</tbody>
</table></li>
<li><p>è¯„ä»·æ–¹æ³•</p>
<p>è¯„ä»·æ–¹æ³•ä¸ºå‡†ç¡®ç‡ï¼ˆ<span class="math inline">\(Accuracy\)</span>ï¼‰ã€‚å‡†ç¡®ç‡çš„å–å€¼èŒƒå›´æ˜¯<span class="math inline">\(0\)</span>åˆ°<span class="math inline">\(1\)</span>ï¼Œè¶Šæ¥è¿‘<span class="math inline">\(1\)</span>ï¼Œè¯´æ˜æ¨¡å‹é¢„æµ‹çš„ç»“æœè¶Šæ¥è¿‘çœŸå®ç»“æœã€‚</p></li>
<li><p>æµ‹è¯•ç»“æœ</p></li>
</ul>
<p>å› æ•°æ®é‡è¾ƒå¤§ï¼Œè¿™é‡Œä»…å±•ç¤ºæµ‹è¯•é›†å<span class="math inline">\(20\)</span>ä¸ªäººåé¢„æµ‹ç»“æœï¼Œæµ‹è¯•é›†æ€»ä½“é¢„æµ‹å‡†ç¡®ç‡ä¸º<span class="math inline">\(83.06\%\)</span>ã€‚</p></li>
</ul>
<figure>
<img data-src="/gender-predict/statistics_result.png" alt="æ–¹æ³•äºŒæµ‹è¯•ç»“æœ" /><figcaption aria-hidden="true">æ–¹æ³•äºŒæµ‹è¯•ç»“æœ</figcaption>
</figure>
<h2 id="å››å®éªŒç»“æœåˆ†æ">å››ã€å®éªŒç»“æœåˆ†æ</h2>
<p>åŸºäºè§„åˆ™çš„æ–¹æ³•è¿›è¡Œæ€§åˆ«é¢„æµ‹å…·æœ‰ç®€æ´ï¼Œæ¦‚æ‹¬èƒ½åŠ›å¼ºç­‰ä¼˜ç‚¹ï¼Œåœ¨æœ¬å®éªŒä¸­æ— éœ€è¯­æ–™åº“ï¼Œå¯ä»¥é€‚ç”¨äºæµ·é‡çš„æ–‡ç« ä¸­äººç‰©æ€§åˆ«é¢„æµ‹ã€‚ä½†å‡†ç¡®åº¦æœ‰æ—¶ä¸å¦‚åŸºäºç»Ÿè®¡çš„æ–¹æ³•ã€‚</p>
<p>åŸºäºç»Ÿè®¡çš„æ–¹æ³•è¿›è¡Œæ€§åˆ«é¢„æµ‹å…·æœ‰ç®€æ´ï¼Œç›´è§‚ï¼Œä¸éœ€è¦è€ƒè™‘å¥æ³•ã€è¯­ä¹‰ä¸Šçš„ä¿¡æ¯ï¼Œä¸éœ€è¦åˆ†è¯ç­‰ä¼˜ç‚¹ã€‚ç„¶è€Œï¼Œå¤§è§„æ¨¡è¯­æ–™è¿›è¡Œå¤§é‡è®¡ç®—ï¼Œè‹¥ä¸é™ä½ç®—æ³•å¤æ‚åº¦ï¼Œåœ¨è®¡ç®—èƒ½åŠ›æœ‰é™çš„æƒ…å†µä¸‹ï¼Œéœ€è¦è¾ƒé•¿çš„æ—¶é—´æ‰èƒ½å¾—åˆ°æœ€ç»ˆç»“æœã€‚</p>
<h2 id="äº”å¿ƒå¾—ä½“ä¼š">äº”ã€å¿ƒå¾—ä½“ä¼š</h2>
<p>åœ¨ä½¿ç”¨åŸºäºè§„åˆ™çš„æ–¹æ³•ä¸­ï¼Œä½¿ç”¨åˆ°äº†ä¸€äº›è§„åˆ™æ–¹æ³•ï¼Œå¦‚æ ¹æ®äººåä¸Šä¸‹æ–‡`â€œä»–â€ã€â€œå¥¹â€ã€â€œå®ƒâ€å‡ºç°æ¬¡æ•°è®¡ç®—æ¦‚ç‡ã€‚</p>
<p>åœ¨åŸºäºç»Ÿè®¡çš„æ–¹æ³•é¢„æµ‹æ€§åˆ«çš„è¿‡ç¨‹ä¸­ï¼Œæ›´åŠ ç†è§£äº†æœ´ç´ è´å¶æ–¯åˆ†ç±»ç®—æ³•ï¼Œè™½ç„¶æœ¬æ¬¡å®éªŒæ•°æ®é‡è¾ƒå°ï¼Œä½†æ˜¯ä¹Ÿåœ¨é¢„æµ‹é›†ä¸­å–å¾—äº†è¾ƒé«˜çš„å‡†ç¡®ç‡ã€‚è‹¥æ‰©å¤§è¯­æ–™åº“ï¼Œä¼˜åŒ–ç®—æ³•ï¼Œæå‡æ¨¡å‹å­¦ä¹ èƒ½åŠ›ï¼Œåº”è¯¥èƒ½å¤Ÿå¾—åˆ°æ›´é«˜çš„å‡†ç¡®ç‡ã€‚</p>
<p>æœ¬æ¬¡å®éªŒæ¯”è¾ƒäº†åŸºäºè§„åˆ™çš„æ–¹æ³•å’ŒåŸºäºç»Ÿè®¡çš„æ–¹æ³•è¿›è¡Œæ€§åˆ«é¢„æµ‹ï¼Œå‘ç°ä¸¤ç§æ–¹æ³•å„æœ‰ä¼˜ç¼ºç‚¹ã€‚åœ¨é˜…è¯»äº†å¤§é‡æ–‡çŒ®åï¼Œè®¤ä¸ºä½¿ç”¨è§„åˆ™å’Œç»Ÿè®¡ç›¸ç»“åˆçš„æ–¹æ³•åº”è¯¥èƒ½å–å¾—æ›´å¥½çš„æ•ˆæœã€‚</p>
]]></content>
      <categories>
        <category>NLP</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>. <a id="more"></a> ## Quick Start</p>
<h3 id="create-a-new-post">Create a new post</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="run-server">Run server</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="generate-static-files">Generate static files</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="deploy-to-remote-sites">Deploy to remote sites</h3>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <tags>
        <tag>test</tag>
      </tags>
  </entry>
  <entry>
    <title>hello</title>
    <url>/hello/</url>
    <content><![CDATA[<h2 id="hello-world">hello world</h2>
<a id="more"></a>
<p>asdasdğŸ˜„æ’’æ‰“ç®—çš„<code>asdasd</code>æ’’æ‰“ç®— <code>é˜¿æ–¯é¡¿</code> asd <img data-src="/hello/avatar.jpg" alt="test" /></p>
<table>
<thead>
<tr class="header">
<th>é˜¿æ–¯é¡¿</th>
<th>é˜¿æ–¯é¡¿</th>
<th>é˜¿æ–¯é¡¿</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>é˜¿æ–¯é¡¿</td>
<td>çˆ±ä¸Š</td>
<td></td>
</tr>
<tr class="even">
<td>çˆ±ä¸Š</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% gp 6-2 %&#125;</span><br><span class="line">![](https:&#x2F;&#x2F;cdn1-t17.techbang.com&#x2F;system&#x2F;attached_images&#x2F;2020&#x2F;05&#x2F;277179&#x2F;original&#x2F;39abbaf3f292fcb1f5406ade609e4214.png)</span><br><span class="line">![](https:&#x2F;&#x2F;cdn1-t17.techbang.com&#x2F;system&#x2F;attached_images&#x2F;2020&#x2F;05&#x2F;277179&#x2F;original&#x2F;39abbaf3f292fcb1f5406ade609e4214.png)</span><br><span class="line">![](https:&#x2F;&#x2F;cdn1-t17.techbang.com&#x2F;system&#x2F;attached_images&#x2F;2020&#x2F;05&#x2F;277179&#x2F;original&#x2F;39abbaf3f292fcb1f5406ade609e4214.png)</span><br><span class="line">![](https:&#x2F;&#x2F;cdn1-t17.techbang.com&#x2F;system&#x2F;attached_images&#x2F;2020&#x2F;05&#x2F;277179&#x2F;original&#x2F;39abbaf3f292fcb1f5406ade609e4214.png)</span><br><span class="line">![](https:&#x2F;&#x2F;cdn1-t17.techbang.com&#x2F;system&#x2F;attached_images&#x2F;2020&#x2F;05&#x2F;277179&#x2F;original&#x2F;39abbaf3f292fcb1f5406ade609e4214.png)</span><br><span class="line">![](https:&#x2F;&#x2F;cdn1-t17.techbang.com&#x2F;system&#x2F;attached_images&#x2F;2020&#x2F;05&#x2F;277179&#x2F;original&#x2F;39abbaf3f292fcb1f5406ade609e4214.png)</span><br><span class="line">&#123;% endgp %&#125;</span><br></pre></td></tr></table></figure>
<div class="group-picture"><div class="group-picture-row"><div class="group-picture-column"><img data-src="https://cdn1-t17.techbang.com/system/attached_images/2020/05/277179/original/39abbaf3f292fcb1f5406ade609e4214.png" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img data-src="https://cdn1-t17.techbang.com/system/attached_images/2020/05/277179/original/39abbaf3f292fcb1f5406ade609e4214.png" /></div><div class="group-picture-column"><img data-src="https://cdn1-t17.techbang.com/system/attached_images/2020/05/277179/original/39abbaf3f292fcb1f5406ade609e4214.png" /></div><div class="group-picture-column"><img data-src="https://cdn1-t17.techbang.com/system/attached_images/2020/05/277179/original/39abbaf3f292fcb1f5406ade609e4214.png" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img data-src="https://cdn1-t17.techbang.com/system/attached_images/2020/05/277179/original/39abbaf3f292fcb1f5406ade609e4214.png" /></div><div class="group-picture-column"><img data-src="https://cdn1-t17.techbang.com/system/attached_images/2020/05/277179/original/39abbaf3f292fcb1f5406ade609e4214.png" /></div></div></div>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% gp 5-3 %&#125;</span><br><span class="line">![](https:&#x2F;&#x2F;cdn1-t17.techbang.com&#x2F;system&#x2F;attached_images&#x2F;2020&#x2F;05&#x2F;277179&#x2F;original&#x2F;39abbaf3f292fcb1f5406ade609e4214.png)</span><br><span class="line">![](https:&#x2F;&#x2F;cdn1-t17.techbang.com&#x2F;system&#x2F;attached_images&#x2F;2020&#x2F;05&#x2F;277179&#x2F;original&#x2F;39abbaf3f292fcb1f5406ade609e4214.png)</span><br><span class="line">![](https:&#x2F;&#x2F;cdn1-t17.techbang.com&#x2F;system&#x2F;attached_images&#x2F;2020&#x2F;05&#x2F;277179&#x2F;original&#x2F;39abbaf3f292fcb1f5406ade609e4214.png)</span><br><span class="line">![](https:&#x2F;&#x2F;cdn1-t17.techbang.com&#x2F;system&#x2F;attached_images&#x2F;2020&#x2F;05&#x2F;277179&#x2F;original&#x2F;39abbaf3f292fcb1f5406ade609e4214.png)</span><br><span class="line">![](https:&#x2F;&#x2F;cdn1-t17.techbang.com&#x2F;system&#x2F;attached_images&#x2F;2020&#x2F;05&#x2F;277179&#x2F;original&#x2F;39abbaf3f292fcb1f5406ade609e4214.png)</span><br><span class="line">&#123;% endgp %&#125;</span><br></pre></td></tr></table></figure>
<div class="group-picture"><div class="group-picture-row"><div class="group-picture-column"><img data-src="https://cdn1-t17.techbang.com/system/attached_images/2020/05/277179/original/39abbaf3f292fcb1f5406ade609e4214.png" /></div><div class="group-picture-column"><img data-src="https://cdn1-t17.techbang.com/system/attached_images/2020/05/277179/original/39abbaf3f292fcb1f5406ade609e4214.png" /></div></div><div class="group-picture-row"><div class="group-picture-column"><img data-src="https://cdn1-t17.techbang.com/system/attached_images/2020/05/277179/original/39abbaf3f292fcb1f5406ade609e4214.png" /></div><div class="group-picture-column"><img data-src="https://cdn1-t17.techbang.com/system/attached_images/2020/05/277179/original/39abbaf3f292fcb1f5406ade609e4214.png" /></div><div class="group-picture-column"><img data-src="https://cdn1-t17.techbang.com/system/attached_images/2020/05/277179/original/39abbaf3f292fcb1f5406ade609e4214.png" /></div></div></div>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">vendors:</span></span><br><span class="line">  <span class="attr">darkmode_js:</span> <span class="string">https://cdn.jsdelivr.net/npm/darkmode-js/lib/darkmode-js.min.js</span></span><br></pre></td></tr></table></figure>
<p>or _vendors.yml <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">darkmode_js:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">darkmode-js</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">1.5</span><span class="number">.7</span></span><br><span class="line">  <span class="attr">file:</span> <span class="string">lib/darkmode-js.min.js</span></span><br></pre></td></tr></table></figure></p>
<p>vendors.njk <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;%- if theme.canvas_ribbon.enable %&#125;</span><br><span class="line">  &lt;script size&#x3D;&quot;&#123;&#123; theme.canvas_ribbon.size &#125;&#125;&quot; alpha&#x3D;&quot;&#123;&#123; theme.canvas_ribbon.alpha &#125;&#125;&quot; zIndex&#x3D;&quot;&#123;&#123; theme.canvas_ribbon.zIndex &#125;&#125;&quot; src&#x3D;&quot;&#123;&#123; theme.vendors.canvas_ribbon &#125;&#125;&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">&#123;%- for name in js_vendors() %&#125;</span><br><span class="line">  &lt;script src&#x3D;&quot;&#123;&#123; url_for(theme.vendors[name]) &#125;&#125;&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&#123;%- endfor %&#125;</span><br><span class="line"></span><br><span class="line">&#123;# Customize darkmode.js - Declaration #&#125;</span><br><span class="line">&#123;%- if theme.darkmode_js.enable %&#125;</span><br><span class="line">  &lt;script src&#x3D;&quot;&#123;&#123; theme.vendors.darkmode_js &#125;&#125;&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br><span class="line"></span><br><span class="line">&#123;# Customize darkmode.js - Invokation #&#125;</span><br><span class="line">&#123;%- if theme.darkmode_js.enable %&#125;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">var options &#x3D; &#123;</span><br><span class="line">  bottom: &#39;64px&#39;, &#x2F;&#x2F; default: &#39;32px&#39;</span><br><span class="line">  right: &#39;unset&#39;, &#x2F;&#x2F; default: &#39;32px&#39;</span><br><span class="line">  left: &#39;32px&#39;, &#x2F;&#x2F; default: &#39;unset&#39;</span><br><span class="line">  time: &#39;0.5s&#39;, &#x2F;&#x2F; default: &#39;0.3s&#39;</span><br><span class="line">  mixColor: &#39;#fff&#39;, &#x2F;&#x2F; default: &#39;#fff&#39;</span><br><span class="line">  backgroundColor: &#39;#fff&#39;,  &#x2F;&#x2F; default: &#39;#fff&#39;</span><br><span class="line">  buttonColorDark: &#39;#100f2c&#39;,  &#x2F;&#x2F; default: &#39;#100f2c&#39;</span><br><span class="line">  buttonColorLight: &#39;#fff&#39;, &#x2F;&#x2F; default: &#39;#fff&#39;</span><br><span class="line">  saveInCookies: true, &#x2F;&#x2F; default: true,</span><br><span class="line">  label: &#39;ğŸŒ“&#39;, &#x2F;&#x2F; default: &#39;&#39;</span><br><span class="line">  autoMatchOsTheme: true &#x2F;&#x2F; default: true</span><br><span class="line">&#125;</span><br><span class="line">const darkmode &#x3D; new Darkmode(options);</span><br><span class="line">darkmode.showWidget();</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
]]></content>
      <tags>
        <tag>test</tag>
      </tags>
  </entry>
</search>
